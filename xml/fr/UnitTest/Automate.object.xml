<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="UnitTest.xsl"?> 

<truth name="Objet Automate">
	<script src="../../../js/framework.js"></script>
	<script src="../../../js/automaton.js"></script>
	<desc>...</desc>
	<test name="Automate.action">
		<assertions>
			<desc>Ensemble de caractère.</desc>
			<value><![CDATA[
var f = Automate.action( 'abc' )
			]]></value>
			<assert><![CDATA[ f.toString() === '[abc]' ]]></assert>
			<assert><![CDATA[ f('D', 10 ) === -1 ]]></assert>
			<assert><![CDATA[ f('a', 10 ) === 10 ]]></assert>
			<assert><![CDATA[ f('b', 10 ) === 10 ]]></assert>
			<assert><![CDATA[ f('c', 10 ) === 10 ]]></assert>
		</assertions>
		<assertions>
			<desc>Ensemble de caractère négatif.</desc>
			<value><![CDATA[
var f = Automate.action( 'abc', true )
			]]></value>
			<assert><![CDATA[ f.toString() === '[^abc]' ]]></assert>
			<assert><![CDATA[ f('D', 10 ) === 10 ]]></assert>
			<assert><![CDATA[ f('a', 10 ) === -1 ]]></assert>
			<assert><![CDATA[ f('b', 10 ) === -1 ]]></assert>
			<assert><![CDATA[ f('c', 10 ) === -1 ]]></assert>
		</assertions>
	</test>
	<test name="Automate.getUniqueID">
		<assertions>
			<assert><![CDATA[ Automate.getUniqueID() === 1 ]]></assert>
			<assert><![CDATA[ Automate.getUniqueID() === 2 ]]></assert>
			<assert><![CDATA[ Automate.getUniqueID() === 3 ]]></assert>
		</assertions>
	</test>
	<test name="Automate.setUniqueID">
		<assertions>
			<value><![CDATA[
Automate.setUniqueID( 1 )
			]]></value>
			<assert><![CDATA[ Automate.getUniqueID() === 1 ]]></assert>
		</assertions>
		<assertions>
			<value><![CDATA[
Automate.setUniqueID( 0 )
			]]></value>
			<assert><![CDATA[ Automate.getUniqueID() === 2 ]]></assert>
		</assertions>
	</test>
	<test name="Automate.wrapper">
		<assertions>
			<value><![CDATA[

			]]></value>
			<assert><![CDATA[ true ]]></assert>
		</assertions>
	</test>
	<test name="Automate.fromChar">
			<desc>
Méthodes créées avec <code>Automate.fromChar</code>:
<code><ul>
	<li>Automate['\\n'] = Automate.fromChar('\n')</li>
	<li>Automate['\\t'] = Automate.fromChar('\t')</li>
	<li>Automate['\\f'] = Automate.fromChar('\f')</li>
	<li>Automate['\\r'] = Automate.fromChar('\r')</li>
	<li>Automate['\\v'] = Automate.fromChar('\v')</li>
</ul></code>
			</desc>
		<assertions>
			<value><![CDATA[
Automate.setUniqueID( 1 )
var f = Automate['\\n']
			]]></value>
		</assertions>
		<assertions>
			<value><![CDATA[
var oFA1 = f()
var oDFA1 = new DFA( oFA1 )
			]]></value>
			<assert><![CDATA[ oFA1.I === 1 ]]></assert>
			<assert><![CDATA[ oFA1.F.toString() === "2" ]]></assert>
			<assert><![CDATA[ oFA1.A.toString() === "\n" ]]></assert>
			<assert><![CDATA[ oFA1.S.toString() === "1,2" ]]></assert>
			<assert><![CDATA[ oFA1.T.length === 1 ]]></assert>
			<assert><![CDATA[ oFA1.T[0].toString() === "1,\n,2" ]]></assert>
			<assert><![CDATA[ oFA1.aTokensID.length === 0 ]]></assert>
			<assert><![CDATA[ ! oFA1.M ]]></assert>
			<assert><![CDATA[ oDFA1.test( '\naaa' ) === '\n' ]]></assert>
			<assert><![CDATA[ oDFA1.test( '\naaa', 2 ) === null ]]></assert>
		</assertions>
		<assertions>
			<value><![CDATA[
var oFA2 = f()
			]]></value>
			<assert><![CDATA[ oFA2.I === 3 ]]></assert>
			<assert><![CDATA[ oFA2.F.toString() === "4" ]]></assert>
			<assert><![CDATA[ oFA2.A.toString() === "\n" ]]></assert>
			<assert><![CDATA[ oFA2.S.toString() === "3,4" ]]></assert>
			<assert><![CDATA[ oFA2.T.length === 1 ]]></assert>
			<assert><![CDATA[ oFA2.T[0].toString() === "3,\n,4" ]]></assert>
			<assert><![CDATA[ oFA2.aTokensID.length === 0 ]]></assert>
			<assert><![CDATA[ ! oFA2.M ]]></assert>
		</assertions>
	</test>
	<test name="Automate.fromCharClass">
		<desc>
Méthodes créées avec <code>Automate.fromCharClass</code>:
<ul>
	<li><b>Ensemble de caractère.</b>
		<code><ul>
			<li>Automate['\\d'] = Automate.fromCharClass( NUMBERS, 0)</li>
			<li>Automate['\\s'] ...</li>
			<li>Automate['\\w'] ...</li>
		</ul></code></li>
	<li><b>Ensemble de caractère négatif.</b>
		<code><ul>
			<li>Automate['\\D'] = Automate.fromCharClass( NUMBERS, 1)</li>
			<li>Automate['\\S'] ...</li>
			<li>Automate['\\W'] ...</li>
		</ul></code></li>
</ul>
avec NUMBERS = '0123456789'.split('')
		</desc>
		<assertions>
			<desc>Ensemble de caractère.</desc>
			<value><![CDATA[
Automate.setUniqueID( 5 )
var f = Automate.fromCharClass( ['a','b','c'] )
var oFA3 = f()
			]]></value>
			<assert><![CDATA[ oFA3.I === 5 ]]></assert>
			<assert><![CDATA[ oFA3.F.toString() === "6" ]]></assert>
			<assert><![CDATA[ oFA3.A.length === 1 ]]></assert>
			<assert><![CDATA[ oFA3.A.toString() === "[abc]" ]]></assert>
			<assert><![CDATA[ oFA3.S.toString() === "5,6" ]]></assert>
			<assert><![CDATA[ oFA3.T.length === 1 ]]></assert>
			<assert><![CDATA[ oFA3.T[0].toString() === "5,[abc],6,[abc]" ]]></assert>
			<assert><![CDATA[ oFA3.T[0][3]('b', 10 ) === 10 ]]></assert>
			<assert><![CDATA[ oFA3.T[0][3]('D', 10 ) === -1 ]]></assert>
			<assert><![CDATA[ oFA3.aTokensID.length === 0 ]]></assert>
			<assert><![CDATA[ ! oFA3.M ]]></assert>
		</assertions>
		<assertions>
			<desc>Ensemble de caractère négatif.</desc>
			<value><![CDATA[
var f = Automate.fromCharClass( ['a','b','c'], true )
var oFA4 = f()
			]]></value>
			<assert><![CDATA[ oFA4.I === 7 ]]></assert>
			<assert><![CDATA[ oFA4.F.toString() === "8" ]]></assert>
			<assert><![CDATA[ oFA4.A.length === 1 ]]></assert>
			<assert><![CDATA[ oFA4.A.toString() === "[^abc]" ]]></assert>
			<assert><![CDATA[ oFA4.S.toString() === "7,8" ]]></assert>
			<assert><![CDATA[ oFA4.T.length === 1 ]]></assert>
			<assert><![CDATA[ oFA4.T[0].toString() === "7,[^abc],8,[^abc]" ]]></assert>
			<assert><![CDATA[ oFA4.T[0][3]('b', 10 ) === -1 ]]></assert>
			<assert><![CDATA[ oFA4.T[0][3]('D', 10 ) === 10 ]]></assert>
			<assert><![CDATA[ oFA4.aTokensID.length === 0 ]]></assert>
			<assert><![CDATA[ ! oFA4.M ]]></assert>
		</assertions>
	</test>
</truth>