<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="UnitTest.xsl"?> 

<truth name="DFA">
	<script src="../../../js/framework.js"></script>
	<script src="../../../js/automaton.js"></script>
	<desc>...</desc>
	<test class="preambule">
		<assertions>
			<value><![CDATA[
var f = function( sChar ){
	var oFA = Automate.makeChar( sChar )
	oFA.aTokensID = [[ 'letter_'+ sChar, oFA.F ]]
	return oFA
	}
var oNFA, oDFA
			]]></value>
		</assertions>
	</test>
	<test name="constructor">
		<assertions>
			<value><![CDATA[
oNFA = f('a')
			]]></value>
			<assert><![CDATA[ oNFA ]]></assert>
			<assert><![CDATA[ ! oNFA.type ]]></assert>
			<assert><![CDATA[ ! oNFA.M ]]></assert>
		</assertions>
		<assertions>
			<value><![CDATA[
oDFA = new DFA( oNFA )
			]]></value>
			<assert><![CDATA[ oDFA ]]></assert>
			<assert><![CDATA[ oDFA.type==="DFA" ]]></assert>
			<assert><![CDATA[ oDFA.M ]]></assert>
		</assertions>
	</test>
	<test name="DFA.prototype.minimize">
		<assertions>
			<value><![CDATA[

			]]></value>
			<assert><![CDATA[ false ]]></assert>
		</assertions>
	</test>
	<test name="DFA.prototype.test">
		<assertions>
			<value><![CDATA[
var oDFA1 = new DFA ( f('a') )
var oDFA2 = new DFA ( Automate.optional( f('a')) )
var oDFA3 = new DFA ( Automate.repeat0n( f('a')) )
			]]></value>
		</assertions>
		<assertions>
			<assert><![CDATA[ oDFA1.test('|') === null  ]]></assert>
			<assert><![CDATA[ oDFA1.test('a|') === 'a'  ]]></assert>
			<assert><![CDATA[ oDFA1.test('aa|') === 'a'  ]]></assert>
		</assertions>
		<assertions>
			<assert><![CDATA[ oDFA2.test('|') === ''  ]]></assert>
			<assert><![CDATA[ oDFA2.test('a|') === 'a'  ]]></assert>
			<assert><![CDATA[ oDFA2.test('aa|') === 'a'  ]]></assert>
		</assertions>
		<assertions>
			<assert><![CDATA[ oDFA3.test('|') === ''  ]]></assert>
			<assert><![CDATA[ oDFA3.test('a|') === 'a'  ]]></assert>
			<assert><![CDATA[ oDFA3.test('aa|') === 'aa'  ]]></assert>
		</assertions>
	</test>
	<test name="DFA.prototype.toJS">
		<assertions>
			<value><![CDATA[

			]]></value>
			<assert><![CDATA[ true ]]></assert>
		</assertions>
	</test>
	<test name="DFA.prototype.toRE">
		<assertions>
			<value><![CDATA[

			]]></value>
			<assert><![CDATA[ true ]]></assert>
		</assertions>
	</test>
	<test name="DFA.aggregate">
		<assertions>
			<value><![CDATA[
oDFA = DFA.aggregate( f('a'), f('b') )
			]]></value>
			<assert><![CDATA[ ! oDFA.sError ]]></assert>
			<assert><![CDATA[ oDFA ]]></assert>
			<assert><![CDATA[ oDFA.I === 1 ]]></assert>
			<assert><![CDATA[ oDFA.F.toString() === "2,3" ]]></assert>
			<assert><![CDATA[ oDFA.A.toString() === "a,b" ]]></assert>
			<assert><![CDATA[ oDFA.S.toString() === "1,2,3" ]]></assert>
			<assert><![CDATA[ oDFA.T.length === 2 ]]></assert>
			<assert><![CDATA[ oDFA.T.join('|') === '1,a,2|1,b,3' ]]></assert>
			<assert><![CDATA[ oDFA.aTokensID.length === 2 ]]></assert>
			<assert><![CDATA[ oDFA.aTokensID.join('|') === 'letter_a,2|letter_b,3' ]]></assert>
			<assert><![CDATA[ oDFA.M ]]></assert>
		</assertions>
		<assertions name="erreur ...un token est perdu...">
			<value><![CDATA[
oDFA = DFA.aggregate( oDFA, f('a') )
			]]></value>
			<assert><![CDATA[ oDFA.sError ]]></assert>
			<assert><![CDATA[ oDFA ]]></assert>
			<assert><![CDATA[ oDFA.I === 1 ]]></assert>
			<assert><![CDATA[ oDFA.F.toString() === "2,3" ]]></assert>
			<assert><![CDATA[ oDFA.A.toString() === "a,b" ]]></assert>
			<assert><![CDATA[ oDFA.S.toString() === "1,2,3" ]]></assert>
			<assert><![CDATA[ oDFA.T.length === 2 ]]></assert>
			<assert><![CDATA[ oDFA.T.join('|') === '1,a,2|1,b,3' ]]></assert>
			<assert><![CDATA[ oDFA.aTokensID.length === 2 ]]></assert>
			<assert><![CDATA[ oDFA.aTokensID.join('|') === 'letter_a,2|letter_b,3' ]]></assert>
			<assert><![CDATA[ oDFA.M ]]></assert>
		</assertions>
		<assertions name="... sans erreur">
			<value><![CDATA[
oDFA = DFA.aggregate( oDFA, f('c') )
			]]></value>
			<assert><![CDATA[ ! oDFA.sError ]]></assert>
			<assert><![CDATA[ oDFA ]]></assert>
			<assert><![CDATA[ oDFA.I === 1 ]]></assert>
			<assert><![CDATA[ oDFA.F.toString() === "2,3,4" ]]></assert>
			<assert><![CDATA[ oDFA.A.toString() === "a,b,c" ]]></assert>
			<assert><![CDATA[ oDFA.S.toString() === "1,2,3,4" ]]></assert>
			<assert><![CDATA[ oDFA.T.length === 3 ]]></assert>
			<assert><![CDATA[ oDFA.T.join('|') === '1,a,2|1,b,3|1,c,4' ]]></assert>
			<assert><![CDATA[ oDFA.aTokensID.length === 3 ]]></assert>
			<assert><![CDATA[ oDFA.aTokensID.join('|') === 'letter_a,2|letter_b,3|letter_c,4' ]]></assert>
			<assert><![CDATA[ oDFA.M ]]></assert>
		</assertions>
	</test>
</truth>